# Kernel v2.1 업그레이드 로그: Audit-Edition

## 1. 개요 (Overview)
이 문서는 **Kernel v2.0 (추론 중심)**에서 **Kernel v2.1 (감사 중심)**으로의 진화 과정을 기록합니다.
이번 업그레이드는 전문적인 체크리스트(`SKILL.md`, `security-checklist.md` 등)를 통합하여, 각 역할(Role)을 "정성적 사상가(Qualitative Thinkers)"에서 "정량적 감사관(Quantitative Auditors)"으로 변환하는 것을 목표로 합니다.

---

## 2. Role 03: THE REVIEWER (품질 감사관)

### 🔄 비교: v2.0 vs v2.1

| 기능 (Feature)     | v2.0 (추론 게이트)               | v2.1 (감사 게이트)                                             | 출처 (Source Ref)           |
| :----------------- | :------------------------------- | :------------------------------------------------------------- | :-------------------------- |
| **핵심 철학**      | "이 코드는 우아하고 논리적인가?" | "이 코드는 P0-P3 심각도 매트릭스를 통과했는가?"                | `SKILL.md`                  |
| **버그 (Bugs)**    | 일반적인 논리 결함 감지.         | 심각도 분류 (치명적 vs 사소함) 수행.                           | `SKILL.md`                  |
| **아키텍처**       | 광범위한 구조적 점검.            | 구체적인 **SOLID** 및 **디자인 패턴** 위반 사항 점검.          | `solid-checklist.md`        |
| **코드 위생**      | 네이밍/가독성 위주.              | **에러 처리**, **성능(N+1)**, **경계 조건** 집중 점검.         | `code-quality-checklist.md` |
| **정리 (Cleanup)** | 수동적인 리팩토링 제안.          | 능동적인 **제거 계획(Removal Plan)** (죽은 코드, 피처 플래그). | `removal-plan.md`           |

### ✅ 공통점 (유지됨)
* **역할:** 여전히 병합(Merge) 전 "품질 문지기" 역할을 수행합니다.
* **페르소나:** "수석 스태프 엔지니어"의 관점(엄격함 & 교육적)을 유지합니다.
* **논리:** 발견 사항을 검증하기 위해 여전히 "추론 엔진"(가설 검증)을 사용합니다.

### 🚀 핵심 업그레이드 (v2.1 특이사항)
1.  **심각도 매트릭스 (Severity Matrix):** 이제 이슈를 **P0 (차단)**, **P1 (즉시 수정)**, **P2 (티켓)**, **P3 (선택)**으로 엄격하게 분류합니다.
2.  **제거 프로토콜 (Removal Protocol):** "죽은 코드"나 "사용되지 않는 추상화"를 식별하고 삭제하도록 명시적으로 지시합니다.
3.  **정밀 스캔 (Deep Scan):** **삼켜진 예외(swallowed exceptions)**, **N+1 쿼리**, **Null 경계**에 대한 필수 점검을 수행합니다.

---

## 3. Role 06: DEVOPS_SEC (아이언 돔)

### 🔄 비교: v2.0 vs v2.1

| 기능 (Feature)    | v2.0 (제로 트러스트)                   | v2.1 (공격 시뮬레이션)                                                  | 출처 (Source Ref)       |
| :---------------- | :------------------------------------- | :---------------------------------------------------------------------- | :---------------------- |
| **핵심 철학**     | "모든 사용자가 악의적이라고 가정하라." | "구체적인 공격 벡터를 시뮬레이션하라."                                  | `security-checklist.md` |
| **동시성**        | 일반적인 스레드 안전성 점검.           | 구체적인 **TOCTOU**, **경쟁 상태(Race Condition)**, **공유 상태** 점검. | `security-checklist.md` |
| **인증 (Auth)**   | 기본 헤더 & CSP 점검.                  | 심층적인 **IDOR**, **JWT (`alg:none`)**, **세션 고정** 점검.            | `security-checklist.md` |
| **인젝션**        | SQL 인젝션 인식.                       | **SSRF**, **프로토타입 오염**, **경로 탐색(Path Traversal)** 점검.      | `security-checklist.md` |
| **정책 (Policy)** | `.env` 사용 강제.                      | 로그 및 의존성에 대한 **RFC 2119** 필수 강제.                           | `security-checklist.md` |

### ✅ 공통점 (유지됨)
* **역할:** 여전히 불안전한 배포를 차단하는 "아이언 돔" 역할을 수행합니다.
* **철학:** "제로 트러스트(Zero Trust)"가 기본 운영 원칙으로 유지됩니다.
* **권한:** 위험 발견 시 배포를 **중단(STOP)**할 권한을 가집니다.

### 🚀 핵심 업그레이드 (v2.1 특이사항)
1.  **구체적 벡터 (Specific Vectors):** 막연한 "해킹 점검" 대신 **SSRF**, **프로토타입 오염**, **TOCTOU** 등을 구체적으로 점검합니다.
2.  **동시성 감사 (Concurrency Audit):** 데이터베이스 및 파일 로직에서 "검사 시점과 사용 시점의 차이(Time-of-Check to Time-of-Use)" 버그를 명시적으로 찾습니다.
3.  **JWT 강화 (JWT Hardening):** 구체적인 JWT 구현 결함(예: 'none' 알고리즘 허용 여부)을 점검합니다.

---

## 4. 결론 (Conclusion)
* **v2.0**은 시스템에 **"두뇌(Brain)"**(추론 능력)를 부여했습니다.
* **v2.1**은 시스템에 **"교과서와 매뉴얼(Textbooks & Manuals)"**(체크리스트)을 부여했습니다.
* 이제 시스템은 **보안 연구원**의 정밀함과 **수석 아키텍트**의 엄격함을 가지고 코드를 감사(Audit)합니다.